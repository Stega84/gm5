<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="de">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Die 3 Meta-Tags oben *müssen* zuerst im head stehen; jeglicher sonstiger head-Inhalt muss *nach* diesen Tags kommen -->
    <title>Gift Me Five Extrawunsch</title>
    <link href="https://fonts.googleapis.com/css?family=Satisfy&display=swap" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <!-- Bootstrap -->
    <link href="bootstrap-4.3.1-dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Unterstützung für Media Queries und HTML5-Elemente in IE8 über HTML5 shim und Respond.js -->
    <!-- ACHTUNG: Respond.js funktioniert nicht, wenn du die Seite über file:// aufrufst -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
</head>

<body class="container">
    <!--Navigation-->
    <div class="bg-1">
        <!-- Home -->
        <a class="home pl-4" th:href="@{home}">Home<span class="sr-only">(current)</span></a>
        <!--Titeltext-->
        <div class="row text-center title-1">GiftMeFive</div>
        <div class="title-1-text" th:text="|${name} Wunschliste!|"></div>
    </div>

    <!-- Eingabefeld -->
    <!-- Form-Elemente fuer Wunsch einfuegen: Felder sind bildlink, name, beschreibung, produktlink, datum, preis -->
    <div class="card mb-4 mt-2" style="background-color: #ddd">
        <form action="/addWish" class="form-horizontal" id="wishform" method="get" onreset="myResetFunction()">
            <div class="row no-gutters">
                <div class="col-md-4 file-field" style="background-color: #ccc">
                    <div class="card-body">
                        <p class="card-title" style="text-align: center">Vorschau(nach Kategorie):</p>
                        <img src="/image/default.jpg" class="card-img" alt="..." id="category_wish_image">
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <fieldset class="form-group">
                            <h5 class="card-title">
								<label for="name" class="control-label">Ihr Wunsch:</label> 
								<input id="name" class="form-control " name="name" type="text" placeholder="My wish">
							</h5>
                            <p class="card-text">
                                <label for="beschreibung" class="control-label">Beschreibung: </label>
                                <textarea id="beschreibung" class="form-control" name="beschreibung" placeholder="This is the greatest wish ever"></textarea>

                                <label for="kategorie" class="control-label">Kategorie:</label>
                                <select class="form-control" id="category" name="kategorie" onchange="newImageFunction()">
                                    <option>Baby</option>
                                    <option>Beauty</option>
                                    <option>Bekleidung</option>
                                    <option>Bücher & Zeitschriften</option>
                                    <option>Bürobedarf & Schreibwaren</option>
                                    <option>Computer & Laptop & Zubehör</option>
                                    <option>DVD & Blu-ray</option>
                                    <option>Drogerie & Körperpflege</option>
                                    <option>Elektronik & Foto</option>
                                    <option>Games</option>
                                    <option>Garten</option>
                                    <option>Geschenkgutscheine</option>
                                    <option>Haustier</option>
                                    <option>Kamera & Foto</option>
                                    <option>Küche, Haushalt & Wohnen</option>
                                    <option>Musik-CDs & Vinyl</option>
                                    <option>Schmuck</option>
                                    <option>Schuhe & Handtaschen</option>
                                    <option>Software</option>
                                    <option>Spielzeug</option>
                                    <option>Sport & Freizeit</option>
                                    <option>Uhren</option>
                                    <option>Sonstiges</option>
                                </select>

                                <div class="form-group">
                                    <label for="bildlink">Eigenes Bild hochladen.</label>
                                    <input type="file" class="form-control-file" name="bildlink" placeholder="">
                                </div>
                                <br>
                                <input type="hidden" name="wunschliste_id" value="" th:value="${id}">
                                <input type="hidden" name="titelname" value="" th:value="${name}">
                                <!--  Achtung: datum und preis auf Festwert gesetzt, noch anders zu lösen -->
                                <input type="hidden" name="preis" value="" th:value="1">

                                <input id="clear" type="reset" onclick="imgResetFunction()" class="btn btn-danger" value="Leeren">
                                <input id="submit" type="submit" class="btn btn-success" value="Speichern">
                            </p>
                        </fieldset>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <!-- Ende von Wunsch einfuegen -->

    <!--Eintrag 1-->
    <div class="card mb-4 mt-2" th:each="artikel : ${wishlist}">
        <div class="row no-gutters">
            <div class="col-md-4">
                <a th:href="@{${artikel.produktlink}}" target="_blank">
                    <img th:src="@{${artikel.bildlink}}" class="card-img" alt="...">
                </a>
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <h5 class="card-title" th:text="${artikel.name}"></h5>
                    <p class="card-text" th:text="${artikel.beschreibung}"></p>
                    <p class="card-text">
                        <small class="text-muted" th:text="|Hinzugefügt am ${artikel.datum}|"></small>
                        <small class="text-muted" th:text="| / Artikel-id ${artikel.id}|"></small>
                        <small class="text-muted" th:text="| / Wunschliste-id ${wunschliste_id}|"></small>
                    </p>
                    <div class="text-right">
                        <a th:href="@{/removeWish(id=${artikel.id}, wunschliste_id=${id}, name=${name})}" class="btn btn-danger">Löschen</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>
        $('.custom-file-input').on(
            'change',
            function() {
                let fileName = $(this).val().split('\\').pop();
                let label = $(this).siblings('.custom-file-label');

                if (label.data('default-title') === undefined) {
                    label.data('default-title', label.html());
                }

                if (label.data('default-title') === undefined) {
                    label.data('default-title', label.html());
                }

                if (fileName === '') {
                    label.removeClass("selected").html(
                        label.data('default-title'));
                } else {
                    label.addClass("selected").html(fileName);
                }
            });
    </script>
    <script>
        // Reset the text of the file input element in a form with id="wimage"
        function imgResetFunction() {
            document.getElementById("bildlink").value = '';
            document.getElementById("bildlink").label.addClass("selected").html(
                'default-title');
        }
        //Bild laden während der Kunde auswählt
        function newImageFunction() {
            var category = document.getElementById('category');
            var categoryName = category.options[category.selectedIndex].value;
                    
            if (categoryName === "Computer & Laptop & Zubehör"){
            	document.getElementById("category_wish_image").src ="/image/lp.jpg";
            }
        }
    </script>

</body>

</html>